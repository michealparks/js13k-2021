import{S as e,i as t,s as n,e as r,a as i,b as s,c as o,d as a,u as l,n as c,f as u,g as f,h as d,j as p,m as h,t as m,k as g,l as w,o as y,p as $,q as b}from"./vendor.34052823.js";(()=>{const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:1,subtree:1})}function t(e){if(e.ep)return;e.ep=1;const t=(e=>{const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t})(e);fetch(e.href,t)}})();let E=["vive","oculus-touch","daydream","gearvr","windows-motion"];function x(e,t,n){const r=e.slice();return r[1]=t[n][0],r[2]=t[n][1],r}function T(e,t){let n,l;return{key:e,first:null,c(){n=r("a-asset-item"),i(n,"id",t[1]),s(n.src,l=t[2])||i(n,"src",l),this.first=n},m(e,t){o(e,n,t)},p(e,n){t=e},d(e){e&&a(n)}}}function v(e){let t,n=[],i=new Map,s=e[0];const f=e=>e[1];for(let r=0;r<s.length;r+=1){let t=x(e,s,r),o=f(t);i.set(o,n[r]=T(o,t))}return{c(){t=r("a-assets");for(let e=0;e<n.length;e+=1)n[e].c()},m(e,r){o(e,t,r);for(let i=0;i<n.length;i+=1)n[i].m(t,null)},p(e,[r]){1&r&&(s=e[0],n=l(n,r,f,1,e,s,i,t,u,T,null,x))},i:c,o:c,d(e){e&&a(t);for(let t=0;t<n.length;t+=1)n[t].d()}}}function R(){return[[["x","ship.obj"],["y","ship.mtl"]]]}class M extends e{constructor(e){super(),t(this,e,R,v,n,{})}}let A=new THREE.TextureLoader,L=(e,t)=>S()*(t-e)+e,S=(e=1)=>Math.random()*e,H=e=>Math.abs(e),I=e=>{let t=S(2*Math.PI),n=e*Math.sqrt(S());return[n*Math.cos(t),n*Math.sin(t)]},k=(e,t,n,r,i=new Float32Array(3*e))=>{let s=new THREE.BufferGeometry,o=new THREE.PointsMaterial({size:t,color:r,map:A.load(n+".png"),transparent:1,depthWrite:0,blending:THREE.AdditiveBlending}),a=new THREE.BufferAttribute(i,3);s.setAttribute("position",a);let l=new THREE.Points(s,o);return l.frustumCulled=0,[l,a]};const q=(e,t)=>{AFRAME.registerComponent(e,t)},z=({el:e},t,n)=>e.emit(t,n),j=e=>document.querySelector(`[${e}]`),O=(e,t,n="scene")=>j(n).addEventListener(e,t),C=e=>e.getObject3D("mesh"),P=(e,t)=>{var n,r;return void 0!==t?C(null!=(n=e.el)?n:e).children[t]:C(null!=(r=e.el)?r:e)},B=(e,t)=>e.el.setObject3D("mesh",t),D=(e,t,n,r,i)=>{e.setXYZ(t,n,r,i)},F=e=>{e.needsUpdate=1},U=e=>new Float32Array(e),G=(e,t,n)=>new THREE.Vector3(e,t,n);function N(){let e,t;return{c(){e=r("a-obj-model"),i(e,"ship",""),s(e.src,t="#x")||i(e,"src","#x"),i(e,"mtl","#y")},m(t,n){o(t,e,n)},p:c,i:c,o:c,d(t){t&&a(e)}}}function V(e,t,n){let r,{position:i}=t,s=G(0,0,-1),o=G(),a=G(),l=10,c=0;return q("ship",{events:{"model-loaded"(){r=P(this,0)}},damage(e=1){return l-=e,l>0||(c=1,o.set(-S(.005),-S(.005),-.01)),z(this,"d",l),l},tick(){r&&(c?(r.position.add(o),r.rotation.z+=.1):(a.copy(i).sub(r.position),r.quaternion.setFromUnitVectors(s,a),r.position.lerp(i,.05)))}}),e.$$set=e=>{"position"in e&&n(0,i=e.position)},[i]}class Y extends e{constructor(e){super(),t(this,e,V,N,n,{position:0})}}function Z(e){let t,n,s,l,c,u,y,$,b,E,x,T,v,R,M,A;return M=new Y({props:{position:e[3]}}),{c(){t=r("a-entity"),n=f(),s=r("a-entity"),l=r("a-box"),u=f(),y=r("a-box"),$=f(),b=r("a-entity"),x=f(),T=r("a-entity"),R=f(),d(M.$$.fragment),i(t,"controls","hand:left"),i(t,"ship-controls",""),i(l,"color","tomato"),i(l,"depth",K),i(l,"height",K),i(l,"width",c=2*e[0]),i(y,"wireframe","true"),i(y,"depth",K),i(y,"height",K),i(y,"width",2*K),i(b,"position","0 -.2 0"),i(b,"text",E=e[4](e[1])),i(T,"position","0 -.3 0"),i(T,"text",v=e[4](e[2])),i(s,"controls","hand:right")},m(e,r){o(e,t,r),o(e,n,r),o(e,s,r),p(s,l),p(s,u),p(s,y),p(s,$),p(s,b),p(s,x),p(s,T),o(e,R,r),h(M,e,r),A=1},p(e,[t]){(!A||1&t&&c!==(c=2*e[0]))&&i(l,"width",c),(!A||2&t&&E!==(E=e[4](e[1])))&&i(b,"text",E),(!A||4&t&&v!==(v=e[4](e[2])))&&i(T,"text",v)},i(e){A||(m(M.$$.fragment,e),A=1)},o(e){g(M.$$.fragment,e),A=0},d(e){e&&a(t),e&&a(n),e&&a(s),e&&a(R),w(M,e)}}}let K=.1;function W(e,t,n){let r,i=G(),s=1*K,o="Health",a="Score 0";return q("controls",{update(){for(let e of E)this.el.setAttribute(e+"-controls",{hand:this.data.hand,model:0})}}),q("ship-controls",{events:{triggerdown(){z(this,"a",r)},triggerup(){z(this,"b")}},tick(){i.copy(this.el.getAttribute("position"))}}),y((()=>{O("model-loaded",(e=>{r=P(e.target.components.ship,0)})),O("d",(({detail:e})=>{n(0,s=e/10*K),s>0||n(1,o="Game over")})),O("c",(({detail:e})=>{n(2,a="Score "+e)}))})),[s,o,a,i,e=>`value:${e};align:center`]}class X extends e{constructor(e){super(),t(this,e,W,Z,n,{})}}function Q(){let e;return{c(){e=r("div"),e.innerHTML='<h1 class="zq996o">THE GALACTIC ASTEROID CLEANUP 1 WAY TICKET LAST RESORT TOP SECRET MISSION</h1> \n  <p class="zq996o">It&#39;s that time of the year again.</p> \n  <p class="zq996o">The annual journey of interstellar killer asteroids from an unknown origin has begun its way toward Earth, and only you, Dave Spacehero, can clean up this mess.</p> \n  <p class="zq996o">Godspeed. You better come home in one piece. As long as you blow up all the asteroids.</p> \n  <button id="c" type="button" class="zq996o">Enter VR</button>',$(e,"id","b"),$(e,"class","zq996o")},m(t,n){o(t,e,n)},p:c,i:c,o:c,d(t){t&&a(e)}}}class J extends e{constructor(e){super(),t(this,e,null,Q,n,{})}}function _(){let e;return{c(){e=r("a-entity"),i(e,"stars","")},m(t,n){o(t,e,n)},p:c,i:c,o:c,d(t){t&&a(e)}}}let ee=U(3e3),te=0,ne=0;for(;3e3>te;){let[e,t]=I(40);ee[te+0]=e,ee[te+1]=t,ee[te+2]=S(300)-150,te+=3}let[re,ie]=k(1e3,.3,"circle","#fff",ee);q("stars",{init(){B(this,re)},tick(){for(te=0;1e3>te;)ne=ie.getZ(te)+te%200/1e3,ne>150&&(ne=-ne),ie.setZ(te,ne),te+=1;F(ie)}});class se extends e{constructor(e){super(),t(this,e,null,_,n,{})}}function oe(){let e;return{c(){e=r("a-entity"),i(e,"debris","")},m(t,n){o(t,e,n)},p:c,i:c,o:c,d(t){t&&a(e)}}}function ae(){let e,t,n,r=0;y((()=>{n=j("bullets").components.bullets,O("enter-vr",(()=>k(0))),O("model-loaded",(n=>{e=n.target.components.ship,t=P(e,0)}))}));let i,s,o,a=new THREE.Sphere,l=new THREE.Box3,c=G(),u=new THREE.Object3D,f=U(1800),d=U(1800),p=U(1800),h=U(1800),m=U(600),g=new THREE.IcosahedronGeometry(.4),w=new THREE.MeshStandardMaterial({color:"#FF926B"}),$=new THREE.InstancedMesh(g,w,600),b=150,E=0,x=(e,t=0,n=-150,r=-150,i=-150)=>{let s=3*e;m[e]=t,u.scale.setScalar(t),u.position.set(n,r,i),u.updateMatrix(),f[s]=n,f[s+1]=r,f[s+2]=i},T=(e,t,n,r)=>{let i=3*e;d[i+0]=t,d[i+1]=n,d[i+2]=r,h[i+0]=S(.01),h[i+1]=S(.01),h[i+2]=S(.01)},v=e=>{if(150>e){let[t,n]=I(2);x(e,.4+S(1),t,n+1,-155)}else x(e)},R=(e,t,n,i,o)=>{if(t>=150)return r+=3,z(e,"c",r),void x(t);for(r+=1,z(e,"c",r),v(t),T(t,0,0,.05+S(.1)),s=0;10>s;)x(b,.4/1.5,n,i,o),T(b,L(-.02,.02),L(-.02,.02),L(.05,.1)),b+=1,599===b&&(b=150),s++},M=(e,t)=>[e[t],e[t+1],e[t+2]],A=(e,t,n)=>{t[e+0]+=n[e+0],t[e+1]+=n[e+1],t[e+2]+=n[e+2]},k=e=>{150>e&&(T(e,0,0,.05+S(.1)),setTimeout(k,300,e+1))};return q("debris",{init(){for(B(this,$),i=0;600>i;)v(i),i++},tick(){if(t&&n){for(l.setFromObject(t),i=0;600>i;){o=3*i,A(o,f,d),A(o,p,h);let t=m[i],[r,s,g]=M(f,o);if(g>150)v(i),i++;else{if(u.scale.set(t,t,t),u.position.set(r,s,g),u.rotation.set(p[o],p[o+1],p[o+2]),u.updateMatrix(),$.setMatrixAt(i,u.matrix),!E){a.set(u.position,.4),l.intersectsSphere(a)&&(R(this,i,r,s,g),E=0>=e.damage(i>150?.1:1));let t=n.positions();for(let e of n.awake()){let[r,s,o]=M(t,3*e);c.set(r,s,o),a.containsPoint(c)&&(R(this,i,r,s,o),n.sleep(e));let l=25;(H(r)>l||H(s)>l||H(o)>l)&&n.sleep(e)}}i++}}F($.instanceMatrix)}}}),[]}class le extends e{constructor(e){super(),t(this,e,ae,oe,n,{})}}function ce(){let e;return{c(){e=r("a-entity"),i(e,"bullets","")},m(t,n){o(t,e,n)},p:c,i:c,o:c,d(t){t&&a(e)}}}let ue,fe=G(),[de,pe]=k(500,.1,"circle","#ba68c8"),he=U(1500),me=new Set,ge=0,we=0,ye=0,$e=0,be=0,Ee=0,xe=0,Te=0;q("bullets",{init(){for(B(this,de),O("a",(e=>{ue=e.detail})),O("b",(()=>{ue=null}));500>$e;)D(pe,$e,150,150,150),$e+=1},tick(e){if(ue&&e-ye>300){fe.set(0,0,-1).applyQuaternion(ue.quaternion).normalize(),$e=3*ge,we=ge%2==0?-.1:.1,he[$e]=.1*fe.x,he[$e+1]=.1*fe.y,he[$e+2]=.1*fe.z;let{x:t,y:n,z:r}=ue.position;D(pe,ge,t+we,n,r),499===ge&&(ge=0),me.add(ge),ye=e,ge+=1}for($e of me)be=3*$e,Ee=he[be],xe=he[be+1],Te=he[be+2],0===Ee&&0===xe&&0===Te||(Ee+=pe.getX($e),xe+=pe.getY($e),Te+=pe.getZ($e),D(pe,$e,Ee,xe,Te));F(pe)},positions:()=>pe.array,awake:()=>me,sleep(e){me.delete(e),D(pe,e,150,150,150)}});class ve extends e{constructor(e){super(),t(this,e,null,ce,n,{})}}let Re,Me,Ae,Le,Se,He={songData:[{i:[0,255,116,79,0,255,116,0,83,255,4,6,69,52,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],c:[{n:[135,,,,135,,,,135,,,,135,,,,135,,,,135,,,,135,,,,135],f:[]},{n:[123,,,,123,,,,123,,,,123,,,,123,,,,123,,,,123,,,,123],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,32,108,5,0,0],p:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],c:[{n:[,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,135],f:[]},{n:[,,123,,,,123,,,,123,,,,123,,,,123,,,,123,,,,123,,,,123],f:[]}]},{i:[2,100,128,0,1,0,128,10,0,31,5,6,58,0,0,7,2,195,6,1,2,135,0,0,32,147,6,0,6],p:[2,2,2,2,3,4,2,2,2,2,3,4,2,2,2,2,3,4,2,2,2,2,3,4],c:[{n:[111,111,111,,111,,,111,,,111,,111,111,111,,113,113,113,,113,,,113,,,113,,113,113,113],f:[]},{n:[111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111],f:[]},{n:[118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118,118],f:[]},{n:[116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116],f:[]}]},{i:[3,146,140,0,1,204,128,3,0,0,92,0,95,0,0,0,3,179,5,1,2,30,135,11,32,150,3,157,6],p:[2,3,4,5,6,7,2,3,4,5,6,7,2,3,4,5,6,7,2,3,4,5,6,7],c:[{n:[],f:[]},{n:[135,,,,,,,,135,,,,,,,,135,,,,,,,,142,,,,,,,,139,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,142],f:[]},{n:[139,,,,139,,,,,,,,,,,,139,,,,,,,,139],f:[]},{n:[140,,,,140,,,,140,,,,,,,,140,,,,,,,,140],f:[]},{n:[142,,,,142,,,,142],f:[]},{n:[146,,,,,,,,,,,,,,,,147],f:[]},{n:[144],f:[]}]},{i:[3,255,128,0,0,0,92,0,0,127,2,2,47,61,0,0,0,96,3,1,3,62,181,0,32,84,2,12,4],p:[2,2,4,4,3,5,2,2,4,4,3,5,2,2,4,4,3,5,2,2,4,4],c:[{n:[],f:[]},{n:[151,149,151,152,151,149,151,152,151,149,151,152,151,149,151,152,151,149,151,152,151,149,151,152,151,149,151,152,151,149,151,152],f:[]},{n:[154,152,154,158,154,152,154,158,154,152,154,158,154,152,154,158,154,152,154,158,154,152,154,158,154,152,154,158,154,152,154,158],f:[]},{n:[147,146,147,149,147,146,147,149,147,146,147,149,147,146,147,149,147,146,147,149,147,146,147,149,147,146,147,149,147,146,147,149],f:[]},{n:[152,151,152,154,152,151,152,154,152,151,152,154,152,151,152,154,152,151,152,154,152,151,152,154,152,151,152,154,152,151,152,154],f:[]}]}],rowLen:5513,patternLen:32,endPattern:23,numChannels:5},Ie=e=>Math.sin(6.283184*e),ke=e=>.003959503758*2**((e-128)/12),qe=(e,t,n)=>{let r,i,s,o,a,l,c=ze[e.i[0]],u=e.i[1],f=e.i[3]/32,d=ze[e.i[4]],p=e.i[5],h=e.i[8]/32,m=e.i[9],g=e.i[10]*e.i[10]*4,w=e.i[11]*e.i[11]*4,y=e.i[12]*e.i[12]*4,$=1/y,b=-e.i[13]/16,E=e.i[14],x=n*2**(2-e.i[15]),T=new Int32Array(g+w+y),v=0,R=0;for(r=0,i=0;g+w+y>r;r++,i++)0>i||(E=E>>8|(255&E)<<4,i-=x,a=ke(t+(15&E)+e.i[2]-128),l=ke(t+(15&E)+e.i[6]-128)*(1+8e-4*e.i[7])),s=1,g>r?s=r/g:g+w>r||(s=(r-g-w)*$,s=(1-s)*3**(b*s)),v+=a*s**f,o=c(v)*u,R+=l*s**h,o+=d(R)*p,m&&(o+=(2*Math.random()-1)*m),T[r]=80*o*s|0;return T},ze=[Ie,e=>.5>e%1?1:-1,e=>e%1*2-1,e=>{let t=e%1*4;return 2>t?t-1:3-t}],je=()=>{let e,t,n=0,r=44+2*Le-8,i=r-36,s=new Uint8Array(44+2*Le);for(s.set([82,73,70,70,255&r,r>>8&255,r>>16&255,r>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]),e=44;Le>n;++n)t=Se[n],t=-32767>t?-32767:t>32767?32767:t,s[e++]=255&t,s[e++]=t>>8&255;return s};function Oe(e){let t,n,s,l,u,y,$,b,E,x,T,v,R,A,L;return n=new M({}),l=new X({}),y=new ve({}),b=new se({}),x=new le({}),v=new J({}),{c(){t=r("a-scene"),d(n.$$.fragment),s=f(),d(l.$$.fragment),u=f(),d(y.$$.fragment),$=f(),d(b.$$.fragment),E=f(),d(x.$$.fragment),T=f(),d(v.$$.fragment),R=f(),A=r("audio"),i(t,"id","a"),i(t,"scene",""),i(t,"stats",0),i(t,"inspector",0),i(t,"fog",e[1]),i(t,"renderer",Ce),i(t,"vr-mode-ui","enterVRButton:#c;"),i(t,"class","fz1rns"),A.loop=1},m(r,i){o(r,t,i),h(n,t,null),p(t,s),h(l,t,null),p(t,u),h(y,t,null),p(t,$),h(b,t,null),p(t,E),h(x,t,null),o(r,T,i),h(v,r,i),o(r,R,i),o(r,A,i),e[2](A),L=1},p:c,i(e){L||(m(n.$$.fragment,e),m(l.$$.fragment,e),m(y.$$.fragment,e),m(b.$$.fragment,e),m(x.$$.fragment,e),m(v.$$.fragment,e),L=1)},o(e){g(n.$$.fragment,e),g(l.$$.fragment,e),g(y.$$.fragment,e),g(b.$$.fragment,e),g(x.$$.fragment,e),g(v.$$.fragment,e),L=0},d(r){r&&a(t),w(n),w(l),w(y),w(b),w(x),r&&a(T),w(v,r),r&&a(R),r&&a(A),e[2](null)}}}let Ce="antialias:true;highRefreshRate:true;foveationLevel:3;alpha:false;";function Pe(e,t,n){var r;let i;Re=r=He,Me=r.endPattern,Ae=0,Le=r.rowLen*r.patternLen*(Me+1)*2,Se=new Int32Array(Le);let s=setInterval((()=>{1>(()=>{let e,t,n,r,i,s,o,a,l,c,u,f,d,p,h=new Int32Array(Le),m=Re.songData[Ae],g=Re.rowLen,w=Re.patternLen,y=0,$=0,b=0,E=[];for(n=0;Me>=n;++n)for(o=m.p[n],r=0;w>r;++r){let x=o?m.c[o-1].f[r]:0;x&&(m.i[x-1]=m.c[o-1].f[r+w]||0,17>x&&(E=[]));let T=ze[m.i[16]],v=m.i[17]/512,R=2**(m.i[18]-9)/g,M=m.i[19],A=m.i[20],L=135.82764118168*m.i[21]/44100,S=1-m.i[22]/255,H=1e-5*m.i[23],I=m.i[24]/32,k=m.i[25]/512,q=6.283184*2**(m.i[26]-9)/g,z=m.i[27]/255,j=m.i[28]*g&-2;for(u=(n*w+r)*g,i=0;4>i;++i)if(s=o?m.c[o-1].n[r+i*w]:0,s){E[s]||(E[s]=qe(m,s,g));let n=E[s];for(t=0,e=2*u;t<n.length;t++,e+=2)h[e]+=n[t]}for(t=0;g>t;t++)a=2*(u+t),c=h[a],c||b?(f=L,M&&(f*=T(R*a)*v+.5),f=1.5*Math.sin(f),y+=f*$,d=S*(c-$)-y,$+=f*d,c=3==A?$:1==A?d:y,H&&(c*=H,c=1>c?c>-1?Ie(.25*c):-1:1,c/=H),c*=I,b=c*c>1e-5,l=Math.sin(q*a)*k+.5,p=c*(1-l),c*=l):p=0,j>a||(p+=h[a-j+1]*z,c+=h[a-j]*z),h[a]=0|p,h[a+1]=0|c,Se[a]+=0|p,Se[a+1]+=0|c}return Ae++,Ae/Re.numChannels})()||(n(0,i.src=URL.createObjectURL(new Blob([je()],{type:"audio/wav"})),i),clearInterval(s))}));return onclick=()=>i.play(),[i,"type:linear;color:#000;far:150;near:0",e=>{b[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}new class extends e{constructor(e){super(),t(this,e,Pe,Oe,n,{})}}({target:document.body});
